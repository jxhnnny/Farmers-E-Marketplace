<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Farmers Market</title>
    <meta name="description" content="Administration panel for the Namibian Farmers Marketplace - manage users, content, and system settings.">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin-panel.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Standard Site Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="index.html">
                        <img src="images/logo.svg" alt="Namibian Farmers Marketplace" class="logo">
                    </a>
                    <span class="brand-text">Namibian Farmers Marketplace</span>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="marketplace.html" class="nav-link">Marketplace</a>
                    </li>
                    <li class="nav-item">
                        <a href="about.html" class="nav-link">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a href="support.html" class="nav-link">Support</a>
                    </li>
                    <li class="nav-item">
                        <a href="contact.html" class="nav-link">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a href="admin-panel.html" class="nav-link active">Admin</a>
                    </li>
                </ul>
                <div class="nav-auth">
                    <div class="admin-user-info">
                        <span class="admin-name" id="adminName">Admin User</span>
                        <div class="admin-avatar">
                            <i class="fas fa-user-shield"></i>
                        </div>
                    </div>
                    <a href="index.html" class="btn btn-outline">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </a>
                </div>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <h2>Admin Panel</h2>
                </div>
                <button class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            
            <div class="sidebar-menu">
                <ul class="menu">
                    <li><a href="#dashboard" class="menu-item active">
                        <i class="fas fa-chart-pie"></i>
                        <span>Dashboard</span>
                    </a></li>
                    <li><a href="#user-management" class="menu-item">
                        <i class="fas fa-users"></i>
                        <span>User Management</span>
                    </a></li>
                    <li><a href="#crop-moderation" class="menu-item">
                        <i class="fas fa-seedling"></i>
                        <span>Crop Moderation</span>
                    </a></li>
                    <li><a href="#transaction-monitoring" class="menu-item">
                        <i class="fas fa-credit-card"></i>
                        <span>Transactions</span>
                    </a></li>
                    <li><a href="#reports-analytics" class="menu-item">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reports & Analytics</span>
                    </a></li>
                    <li><a href="#system-settings" class="menu-item">
                        <i class="fas fa-cogs"></i>
                        <span>System Settings</span>
                    </a></li>
                </ul>
                
                <div class="sidebar-divider"></div>
                
                <ul class="menu">
                    <li><a href="#security-logs" class="menu-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Security Logs</span>
                    </a></li>
                    <li><a href="#support-tickets" class="menu-item">
                        <i class="fas fa-headset"></i>
                        <span>Support Tickets</span>
                    </a></li>
                    <li><a href="#notifications" class="menu-item">
                        <i class="fas fa-bell"></i>
                        <span>Notifications</span>
                        <span class="notification-badge">3</span>
                    </a></li>
                </ul>
                
                <div class="sidebar-divider"></div>
                
                <ul class="menu">
                    <li><a href="marketplace-dashboard.html" class="menu-item">
                        <i class="fas fa-store"></i>
                        <span>Marketplace</span>
                    </a></li>
                    <li><a href="farmer-portal.html" class="menu-item">
                        <i class="fas fa-tractor"></i>
                        <span>Farmer Portal</span>
                    </a></li>
                    <li><a href="buyer-portal.html" class="menu-item">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Buyer Portal</span>
                    </a></li>
                    <li><a href="index.html" class="menu-item">
                        <i class="fas fa-home"></i>
                        <span>Main Site</span>
                    </a></li>
                </ul>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <section class="page-header admin-page-header">
                <div class="admin-header-content">
                    <h1 class="page-title" id="adminDashboardTitle">Administration Dashboard</h1>
                    <p class="page-subtitle" id="adminDashboardSubtitle">System management and oversight</p>
                    <nav class="breadcrumb">
                        <a href="index.html">Home</a>
                        <span class="separator">/</span>
                        <span class="current">Admin Panel</span>
                    </nav>
                </div>
            </section>
            
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <!-- System Overview Stats -->
                <div class="admin-stats">
                    <div class="stat-card critical">
                        <div class="stat-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Critical Alerts</span>
                        </div>
                        <div class="stat-value">2</div>
                        <div class="stat-description">Pending security reviews</div>
                    </div>
                    
                    <div class="stat-card warning">
                        <div class="stat-header">
                            <i class="fas fa-flag"></i>
                            <span>Flagged Content</span>
                        </div>
                        <div class="stat-value">7</div>
                        <div class="stat-description">Awaiting moderation</div>
                    </div>
                    
                    <div class="stat-card success">
                        <div class="stat-header">
                            <i class="fas fa-check-circle"></i>
                            <span>System Health</span>
                        </div>
                        <div class="stat-value">98%</div>
                        <div class="stat-description">All services operational</div>
                    </div>
                    
                    <div class="stat-card info">
                        <div class="stat-header">
                            <i class="fas fa-ticket-alt"></i>
                            <span>Open Tickets</span>
                        </div>
                        <div class="stat-value">12</div>
                        <div class="stat-description">Support requests pending</div>
                    </div>
                </div>
                
                <!-- Quick Actions Grid -->
                <div class="quick-actions-grid">
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>User Management</h3>
                        <p>Add, edit, or suspend user accounts</p>
                        <button class="btn btn-primary btn-small" onclick="showSection('user-management')">
                            Manage Users
                        </button>
                    </div>
                    
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Content Review</h3>
                        <p>Review and moderate crop listings</p>
                        <button class="btn btn-primary btn-small" onclick="showSection('crop-moderation')">
                            Review Content
                        </button>
                    </div>
                    
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Generate Report</h3>
                        <p>Create comprehensive system reports</p>
                        <button class="btn btn-primary btn-small" onclick="generateSystemReport()">
                            Generate Report
                        </button>
                    </div>
                    
                    <div class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-broadcast-tower"></i>
                        </div>
                        <h3>Send Announcement</h3>
                        <p>Broadcast messages to all users</p>
                        <button class="btn btn-primary btn-small" onclick="openAnnouncementModal()">
                            Send Message
                        </button>
                    </div>
                </div>
                
                <!-- Recent Activity Feed -->
                <div class="admin-activity-feed">
                    <h3>Recent Administrative Activity</h3>
                    <div class="activity-list">
                        <div class="admin-activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-user-times text-red"></i>
                            </div>
                            <div class="activity-content">
                                <strong>User suspension:</strong> Suspended account for TOS violation
                                <div class="activity-meta">
                                    <span class="activity-admin">by Admin User</span>
                                    <span class="activity-time">5 minutes ago</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="admin-activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-check-circle text-green"></i>
                            </div>
                            <div class="activity-content">
                                <strong>Content approved:</strong> Organic tomato listing verified
                                <div class="activity-meta">
                                    <span class="activity-admin">by Moderator Jane</span>
                                    <span class="activity-time">12 minutes ago</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="admin-activity-item">
                            <div class="activity-icon">
                                <i class="fas fa-cog text-blue"></i>
                            </div>
                            <div class="activity-content">
                                <strong>System update:</strong> Updated payment processing settings
                                <div class="activity-meta">
                                    <span class="activity-admin">by System Admin</span>
                                    <span class="activity-time">1 hour ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- User Management Section -->
            <section id="user-management" class="content-section">
                <div class="section-header">
                    <h2>User Management</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-user-plus"></i>
                            Add New User
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i>
                            Export Users
                        </button>
                    </div>
                </div>
                
                <!-- User Search and Filters -->
                <div class="user-filters">
                    <div class="filter-group">
                        <input type="text" id="userSearch" placeholder="Search users..." class="form-input">
                    </div>
                    <div class="filter-group">
                        <select id="userTypeFilter" class="form-select">
                            <option value="">All User Types</option>
                            <option value="farmer">Farmers</option>
                            <option value="buyer">Buyers</option>
                            <option value="admin">Administrators</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <select id="userStatusFilter" class="form-select">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="suspended">Suspended</option>
                            <option value="pending">Pending Verification</option>
                        </select>
                    </div>
                </div>
                
                <!-- Users Table -->
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Registration Date</th>
                                <th>Last Activity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <div class="user-avatar">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div>
                                            <div class="user-name">John Smith</div>
                                            <div class="user-email">john.smith@email.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td><span class="badge badge-farmer">Farmer</span></td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>Jan 15, 2024</td>
                                <td>2 hours ago</td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-icon" title="View Profile">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-icon" title="Edit User">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-icon danger" title="Suspend User">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <!-- Additional rows would be generated dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Crop Moderation Section -->
            <section id="crop-moderation" class="content-section">
                <div class="section-header">
                    <h2>Crop Moderation</h2>
                    <div class="section-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-filter"></i>
                            Filter Pending
                        </button>
                    </div>
                </div>
                
                <!-- Moderation Queue -->
                <div class="moderation-queue">
                    <div class="moderation-item">
                        <div class="crop-preview">
                            <img src="images/crops/organic-tomatoes.jpg" alt="Crop Image" class="crop-thumbnail">
                            <div class="crop-details">
                                <h4>Organic Roma Tomatoes</h4>
                                <p><strong>Farmer:</strong> Green Valley Farms</p>
                                <p><strong>Price:</strong> N$45/kg</p>
                                <p><strong>Quantity:</strong> 500kg</p>
                                <div class="flag-reason">
                                    <i class="fas fa-flag text-orange"></i>
                                    <span>Flagged for price verification</span>
                                </div>
                            </div>
                        </div>
                        <div class="moderation-actions">
                            <button class="btn btn-success btn-small">
                                <i class="fas fa-check"></i>
                                Approve
                            </button>
                            <button class="btn btn-warning btn-small">
                                <i class="fas fa-edit"></i>
                                Request Changes
                            </button>
                            <button class="btn btn-danger btn-small">
                                <i class="fas fa-times"></i>
                                Reject
                            </button>
                        </div>
                    </div>
                    
                    <!-- Additional moderation items would be listed here -->
                </div>
            </section>
            
            <!-- Transaction Monitoring Section -->
            <section id="transaction-monitoring" class="content-section">
                <div class="section-header">
                    <h2>Transaction Monitoring</h2>
                    <div class="section-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i>
                            Export Transactions
                        </button>
                    </div>
                </div>
                
                <!-- Transaction Summary Cards -->
                <div class="transaction-summary">
                    <div class="summary-card">
                        <h4>Today's Transactions</h4>
                        <div class="summary-value">N$ 15,847</div>
                        <div class="summary-count">23 transactions</div>
                    </div>
                    <div class="summary-card">
                        <h4>Pending Payments</h4>
                        <div class="summary-value">N$ 3,210</div>
                        <div class="summary-count">7 pending</div>
                    </div>
                    <div class="summary-card">
                        <h4>Disputed Orders</h4>
                        <div class="summary-value">2</div>
                        <div class="summary-count">Requires attention</div>
                    </div>
                </div>
                
                <!-- Recent Transactions Table -->
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Buyer</th>
                                <th>Farmer</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#ORD-2024-1847</td>
                                <td>Sarah Mitchell</td>
                                <td>Green Valley Farms</td>
                                <td>N$ 2,250</td>
                                <td><span class="status-badge completed">Completed</span></td>
                                <td>Today, 2:30 PM</td>
                                <td>
                                    <button class="btn-icon" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <!-- Additional rows would be generated dynamically -->
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Reports & Analytics Section -->
            <section id="reports-analytics" class="content-section">
                <div class="section-header">
                    <h2>Reports & Analytics</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            Create Report
                        </button>
                    </div>
                </div>
                
                <!-- Report Templates -->
                <div class="report-templates">
                    <div class="template-card">
                        <i class="fas fa-users"></i>
                        <h4>User Analytics</h4>
                        <p>Registration trends, activity patterns, and user demographics</p>
                        <button class="btn btn-outline btn-small">Generate</button>
                    </div>
                    
                    <div class="template-card">
                        <i class="fas fa-chart-line"></i>
                        <h4>Sales Report</h4>
                        <p>Revenue trends, transaction volumes, and market performance</p>
                        <button class="btn btn-outline btn-small">Generate</button>
                    </div>
                    
                    <div class="template-card">
                        <i class="fas fa-seedling"></i>
                        <h4>Crop Analytics</h4>
                        <p>Popular crops, seasonal trends, and pricing analysis</p>
                        <button class="btn btn-outline btn-small">Generate</button>
                    </div>
                    
                    <div class="template-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Security Report</h4>
                        <p>Security incidents, login attempts, and system vulnerabilities</p>
                        <button class="btn btn-outline btn-small">Generate</button>
                    </div>
                </div>
            </section>
            
            <!-- System Settings Section -->
            <section id="system-settings" class="content-section">
                <div class="section-header">
                    <h2>System Settings</h2>
                    <div class="section-actions">
                        <button class="btn btn-success">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                    </div>
                </div>
                
                <!-- Settings Form -->
                <div class="settings-form">
                    <div class="settings-group">
                        <h4>General Settings</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Site Name</label>
                                <input type="text" value="Farmers Market Namibia" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Admin Email</label>
                                <input type="email" value="admin@farmersmarket.com" class="form-input">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Site Description</label>
                            <textarea class="form-textarea">Connect Namibian farmers directly with buyers for fresh, local produce.</textarea>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h4>Payment Settings</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Commission Rate (%)</label>
                                <input type="number" value="5" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Minimum Order Amount</label>
                                <input type="number" value="50" class="form-input">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h4>Security Settings</h4>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                Enable two-factor authentication
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                Require email verification for new accounts
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox">
                                Enable automatic content moderation
                            </label>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Other sections would be implemented similarly -->
            <section id="security-logs" class="content-section">
                <div class="section-header">
                    <h2>Security Logs</h2>
                </div>
                <div class="placeholder-section">
                    <i class="fas fa-shield-alt"></i>
                    <p>Security logs and monitoring coming soon</p>
                </div>
            </section>
            
            <section id="support-tickets" class="content-section">
                <div class="section-header">
                    <h2>Support Tickets</h2>
                </div>
                <div class="placeholder-section">
                    <i class="fas fa-headset"></i>
                    <p>Support ticket management coming soon</p>
                </div>
            </section>
            
            <section id="notifications" class="content-section">
                <div class="section-header">
                    <h2>System Notifications</h2>
                </div>
                <div class="placeholder-section">
                    <i class="fas fa-bell"></i>
                    <p>Notification management coming soon</p>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Announcement Modal -->
    <div id="announcementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send System Announcement</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="announcementForm">
                    <div class="form-group">
                        <label>Announcement Title</label>
                        <input type="text" id="announcementTitle" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Message</label>
                        <textarea id="announcementMessage" class="form-textarea" rows="5" required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Target Audience</label>
                        <select id="announcementAudience" class="form-select">
                            <option value="all">All Users</option>
                            <option value="farmers">Farmers Only</option>
                            <option value="buyers">Buyers Only</option>
                            <option value="admins">Administrators Only</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Priority Level</label>
                        <select id="announcementPriority" class="form-select">
                            <option value="info">Information</option>
                            <option value="warning">Warning</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="closeAnnouncementModal()">Cancel</button>
                <button type="submit" form="announcementForm" class="btn btn-primary">Send Announcement</button>
            </div>
        </div>
    </div>
    
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/admin-panel.js"></script>
</body>
</html>